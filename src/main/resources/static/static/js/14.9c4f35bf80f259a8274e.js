webpackJsonp([14],{ZXSk:function(e,t){},deJC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("yqhJ"),l=(a("p18z"),{name:"addArticle",data:function(){return{value2:!1,categoryList:[],article:{c_id:"",title:"",keyword:"",describe:"",picture:"",markdown:"",html:"",hot:"",text:""},fileList:[{name:"原图片",url:""}],headers:{token:this.$store.getters.token},initData:"initData"}},components:{Markdown:s.a},created:function(){this.headers.token=this.$store.getters.token,this.article=this.$router.currentRoute.params,this.fileList[0].url=this.article.picture,this.initData=this.article.markdown,"1"==this.article.hot&&(this.value2=!0),this.findByCategoryAll()},methods:{findByCategoryAll:function(e,t){var a=this;this.$axios({method:"get",url:this.$baseURL+"/exampleCategory/findByAll",headers:{"Content-Type":"application/json;charset=UTF-8",token:this.$store.getters.token}}).then(function(e){console.log(e),a.categoryList=e.data}).catch(function(e){console.log(e)})},uploadSuccess:function(e,t,a){return console.log(e,t,a),e.ok?(this.article.picture=e.data.src,this.$message({showClose:!0,message:"上传成功！",type:"success"})):(this.fileList=[],console.log("resp失败onse",a),this.$message({showClose:!0,message:"上传失败！",type:"error"})),!1},uploadError:function(e,t,a){return console.log(e,t,a),this.$message({showClose:!0,message:"上传失败！",type:"error"}),!1},change:function(){this.article.markdown=arguments[0].markdown,this.article.html=arguments[0].html,this.article.text=arguments[0].text},querySearch:function(e,t){var a=this.restaurants;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){console.log(e)},submitArticle:function(){var e=this;this.value2?this.article.hot="1":this.article.hot="0",this.$axios({method:"put",url:this.$baseURL+"/example/updateById",data:this.article,headers:{"Content-Type":"application/json;charset=UTF-8",token:this.$store.getters.token}}).then(function(t){console.log(t),t.data.ok?(e.$message({showClose:!0,message:t.data.message,type:"success"}),e.findPage(e.page.pageNum,e.pageSize)):e.$message({showClose:!0,message:t.data.message,type:"error"})}).catch(function(e){console.log(e)}),console.log("源码",this.article)}}}),i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addArticle"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","list-type":"picture",limit:1,action:e.$baseURL+"/upload/uploadFileMasterGraph",headers:e.headers,multiple:"","file-list":e.fileList,"on-success":e.uploadSuccess,"on-error":e.uploadError}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("\n          将\n          "),a("span",{staticStyle:{color:"red"}},[e._v("主图")]),e._v("拖到此处，或\n          点击上传\n          "),a("p",{staticStyle:{color:"#005aff"}},[e._v("建议图片比例统一")])])])],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-form",{ref:"article",attrs:{model:e.article,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"文章标题"}},[a("el-input",{attrs:{placeholder:"50字符内",maxlength:"50"},model:{value:e.article.title,callback:function(t){e.$set(e.article,"title",t)},expression:"article.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文章描述"}},[a("el-input",{attrs:{placeholder:"150字符内",maxlength:"150"},model:{value:e.article.intro,callback:function(t){e.$set(e.article,"intro",t)},expression:"article.intro"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{staticClass:"keyword",attrs:{placeholder:"3-5个关键字（关键字与关键字之间用英文逗号隔开）",maxlength:"80"},model:{value:e.article.keyword,callback:function(t){e.$set(e.article,"keyword",t)},expression:"article.keyword"}}),e._v(" "),a("el-select",{staticClass:"articleCategory",attrs:{placeholder:"请选择所属文章类别"},model:{value:e.article.c_id,callback:function(t){e.$set(e.article,"c_id",t)},expression:"article.c_id"}},e._l(e.categoryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-switch",{staticClass:"hot",staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"首页展示"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),e._v(" "),a("el-button",{staticClass:"subBtn",attrs:{type:"primary"},on:{click:e.submitArticle}},[e._v("修改")])],1)],1)],1)],1),e._v(" "),a("Markdown",{attrs:{onchange:e.change,initData:e.initData}})],1)},staticRenderFns:[]};var r=a("C7Lr")(l,i,!1,function(e){a("ZXSk")},null,null);t.default=r.exports}});
//# sourceMappingURL=14.9c4f35bf80f259a8274e.js.map